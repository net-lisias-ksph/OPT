PART
{
// --- general parameters ---
name = turboRamJet
module = Part
author = K.Yeon

// --- asset parameters ---
MODEL
{
	model = OPT/Parts/NewParts/mk2_turboRamJet
}


rescaleFactor = 1

// --- node definitions ---
node_stack_top = 0.0, 3.99574, 0.0, 0.0, 1.0, 0.0, 3

node_attach = 1.25, 0.0, 0.0, 0.0, 1.0, 0.0, 4	

// --- editor parameters ---
TechRequired = highAltitudeFlight
entryCost = 18000
cost = 2250
category = Engine
subcategory = 0
title = OPT J-60 ScreamJet
manufacturer = OPT Propulsion Science Division
description = Kerbal scientests used to thought that Bob kerman screams at the back seat when his craft flew pass mach 3. But Wernher believed that Bob was a brave kerbal and he would never scream during flights. He thinks, the sound was caused by a special airframe shape interact with super high speed air. Upon further investigation, Werner published his theory on the 'Scream' effect. OPT's scientests applied this theory to their latest atmospheric propulsion project, although this resulted OPT in bankrupt, but they do now have the first ever ScreamJet! At low speeds, the engine operates as a regular turbojet. However, at higher speeds it screams! For a short period the 'scream' effect takes over which packs a powerful kick. At even higher speeds still, it explodes.
// attachment rules: stack, srfAttach, allowStack, allowSrfAttach, allowCollision
attachRules = 1,1,1,1,0

// --- standard part parameters ---
mass = 6.5
dragModelType = default
crashTolerance = 12
breakingForce = 400
breakingTorque = 600
maxTemp = 2900

	emissiveConstant = 0.8 // engine nozzles are good at radiating.
	maximum_drag = 0.2
	minimum_drag = 0.2
	angularDrag = 2
	MODULE
	{
		name = ModuleEnginesFX
		thrustVectorTransformName = thrustTransform
		exhaustDamage = True
		ignitionThreshold = 0.03
		minThrust = 0
		maxThrust = 650
		heatProduction = 291
		useEngineResponseTime = True
		engineAccelerationSpeed = 0.2
		engineDecelerationSpeed = 0.4
		useVelocityCurve = False
		flameoutEffectName = flameout
		powerEffectName = running_thrust
		engageEffectName = engage
		disengageEffectName = disengage
		spoolEffectName = running_turbine
		engineSpoolIdle = 0.05
		engineSpoolTime = 2.0
		EngineType = Turbine
		
		PROPELLANT
		{
			name = LiquidFuel
			resourceFlowMode = STAGE_PRIORITY_FLOW
			ratio = 4
			DrawGauge = True
		}
		PROPELLANT
		{
			name = IntakeAir
			ignoreForIsp = True
			ratio = 9
		}
		atmosphereCurve
		{
			key = 0 7000 0 0 
		}
		// Jet params
		atmChangeFlow = True
		useVelCurve = True
		useAtmCurve = True
		machLimit = 6
		machHeatMult = 3.0
velCurve
{
key = 0 0.6

key = 0.2 0.8

key = 1.36 0.9

key = 2.0875 1.306206 0.558359 0.2083685

key = 2.474524 1.870126 1.621842 1.29743

key = 2.945652 2.160394 0.3836924 -0.04622887

key = 3.842887 1.940503 -0.2246427 -0.2246427

key = 6 1.5

key = 7.5 0

}
		atmCurve
		{
		//Airflow vs max thrust?
		key = 0 0
		key = 0.005 0.3

		key = 0.03469022 0.8916956 19.92897 0.5922443

		key = 0.2 1

		key = 0.3 1

		key = 1 0.6
		}
	}
	MODULE
	{
		name = ModuleAlternator
		RESOURCE
		{
			name = ElectricCharge
			rate = 5.0
		}
	}
	RESOURCE
	{
		name = ElectricCharge
		amount = 0
		maxAmount = 0
		isTweakable = false
		hideFlow = true
	}
	MODULE
	{
		name = ModuleSurfaceFX
		thrustProviderModuleIndex = 0
		fxMax = 0.6
		maxDistance = 25
		falloff = 2
		thrustTransformName = thrustTransform
	}





	EFFECTS
	{		
		running_thrust
		{			

			PREFAB_PARTICLE
			{
				prefabName = fx_smokeTrail_light
				transformName = thrustTransform
				emission = 0.0 0.0
				emission = 0.05 0.0
				emission = 0.075 0.25
				emission = 1.0 1.25
				speed = 0.0 0.25
				speed = 1.0 1.0
				localOffset = 0, 0, 1
				localRotation = 1, 0, 0, -90
			}
////////////////////////////OPTFX/////////////////////////////
    AUDIO
    {
      channel = Ship
      clip = sound_rocket_spurts
      volume = 0.0 0.0
      volume = 0.1 1.5
      volume = 1.0 2
      pitch = 0.0 0.2
      pitch = 1.0 1.0
      loop = true
    }
            AUDIO
            {
		name = jetsHumm
                channel = Ship
                clip = sound_jet_low
                volume = 0.0 0.0
		volume = 0.1 0.4
		volume = 0.6 0.8
                volume = 1.0 0.3
		volume = 1.5 0.2
                pitch = 0.0 0.1
		pitch = 0.5 0.2
                pitch = 1.0 2
                loop = true
                speed = 0.0 1.70
                speed = 1.0 1.65
            }
            AUDIO
            {
		name = jetscream
                channel = Ship
                clip = sound_jet_deep
                volume = 0.0 0.0
		volume = 0.1 1
                volume = 1.0 3.5
		volume = 1.7 5.5
                pitch = 0.0 0.8
		pitch = 0.5 1
                pitch = 1.0 3
		pitch = 1.7 5
                loop = true
                speed = 0.0 1.70
                speed = 1.0 1.95
            }
            AUDIO
            {
		name = jetscreamHighSpeed
                channel = Ship
                clip = sound_jet_low
                volume = 0.9 0.0
                volume = 1.0 0.1
		volume = 1.7 3
		volume = 5 5
                pitch = 0.9 1.5
		pitch = 2.7 3
                loop = true
                speed = 0.0 1
                speed = 1.0 1
            }
            AUDIO
            {
		name = rocketsound
                channel = Ship
                clip = sound_rocket_mini
                volume = 0.0 0.0
                volume = 1.0 0.8
		volume = 2.7 0.2
                pitch = 0.0 0.2
                pitch = 1.0 0.3
		pitch = 1.7 0.4
                loop = true
            }
    MODEL_MULTI_PARTICLE
    {
      name = asdf3
      modelName = Squad/FX/shockExhaust_blue_small
      transformName = FXNode
      emission = 0.0 0.0
      emission = 0.05 0.0
      emission = 0.075 2
      emission = 1.0 3
      speed = 0.0 0.5
      speed = 1.0 1.2
      speed = 3.0 3.2
    }
    MODEL_MULTI_PARTICLE
    {
      name = asdf4
      modelName = Squad/FX/shockExhaust_blue_small
      transformName = FXNode1
      emission = 0.0 0.0
      emission = 0.05 0.0
      emission = 0.075 2
      emission = 1.0 3
      speed = 0.0 0.5
      speed = 1.0 1.2
      speed = 3.0 3.2
    }
    MODEL_MULTI_PARTICLE
    {
               name = flamethrust
               modelName = OPT/FX/RedGreenFlame
               transformName = FXNode
               emission = 0.0 0 0
               emission = 0.9 0
               emission = 1.5 0.9
               emission = 2.75 7
               speed = 0.0 0.4
               speed = 1 0.7
           }
           MODEL_MULTI_PARTICLE
           {
               name = flamethrust1
               modelName = OPT/FX/RedGreenFlame
               transformName = FXNode1
               emission = 0.0 0 0
               emission = 0.9 0
               emission = 1.5 0.9
               emission = 2.75 7
               speed = 0.0 0.4
           speed = 1 0.7
       }
////////////////////////////OPTFX==END//////////////////////////		
		}
		running_turbine
		{
			AUDIO
			{
				channel = Ship
				clip = sound_jet_low
				volume = 0.0 0.0
				volume = 0.05 0.7
				volume = 1.0 1.0
				pitch = 0.0 0.5
				pitch = 0.05 0.6
				pitch = 1.0 1.2
				loop = true
			}
		}
		engage
		{
			AUDIO
			{
				channel = Ship
				clip = sound_vent_medium
				volume = 1.0
				pitch = 2.0
				loop = false
			}
		}
		disengage
		{
			AUDIO
			{
				channel = Ship
				clip = sound_vent_soft
				volume = 1.0
				pitch = 2.0
				loop = false
			}
		}
		flameout
		{
			PREFAB_PARTICLE
			{
				prefabName = fx_exhaustSparks_flameout_2
				transformName = thrustTransform
				oneShot = true
			}
			AUDIO
			{
				channel = Ship
				clip = sound_explosion_low
				volume = 1.0
				pitch = 2.0
				loop = false
			}
		}
	}


	MODULE
	{
		name = FXModuleAnimateThrottle
		animationName = engine_light
		dependOnEngineState = True
		responseSpeed = 0.01
	}
MODULE
{
  name = ModuleResourceIntake
  resourceName = IntakeAir
  checkForOxygen = true
  area = 0.0125
  intakeSpeed = 10
  intakeTransformName = intake_transform
}

RESOURCE
{
 name = IntakeAir
 amount = 0.5
 maxAmount = 1.0
}
RESOURCE
{
 name = LiquidFuel
 amount = 250
 maxAmount = 250
}
	MODULE
	{
		name = ModuleLiftingSurface
		useInternalDragModel = False
		deflectionLiftCoeff = 0.7
		dragAtMaxAoA = 0.3
		dragAtMinAoA = 0.1
	}
}
