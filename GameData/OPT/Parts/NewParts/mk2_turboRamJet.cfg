PART
{
// --- general parameters ---
name = turboRamJet
module = Part
author = K.Yeon

// --- asset parameters ---
MODEL
{
	model = OPT/Parts/NewParts/mk2_turboRamJet
}


rescaleFactor = 1

// --- node definitions ---
node_stack_top = 0.0, 3.99574, 0.0, 0.0, 1.0, 0.0, 3

node_attach = 1.25, 0.0, 0.0, 0.0, 1.0, 0.0, 4	



// --- FX definitions ---

fx_exhaustLight_yellow = 0.0, -0.1, 0.0, 0.0, 0.0, 1.0, power
fx_smokeTrail_light  = 0.0, -0.1, 0.0, 0.0, 1.0, 0.0, power
fx_exhaustSparks_flameout = 0.0, 0.0, 0.0, 0.0, 1.0, 0.0, flameout

// --- Sound FX definition ---

sound_vent_medium = engage
sound_jet_low = running
sound_jet_deep = power
sound_vent_soft = disengage
sound_explosion_low = flameout

// --- editor parameters ---
TechRequired = highAltitudeFlight
entryCost = 18000
cost = 2250
category = Engine
subcategory = 0
title = OPT J-59 Turboramjet
manufacturer = OPT Propulsion Science Division
description = OPT's latest venture into atmospheric propulsion, boldly going where no scientific institution has ever gone before. As it happens, there was a reason for that, and as a result OPT are now bankrupt -- but they do have this shiny new Turboramjet. At low speeds, the engine operates as a regular turbojet. However, at higher speeds it is able to switch modes and operate as a highly efficient ramjet. At even higher speeds still, it explodes.
// attachment rules: stack, srfAttach, allowStack, allowSrfAttach, allowCollision
attachRules = 1,1,1,1,0

// --- standard part parameters ---
mass = 6.5
dragModelType = default
maximum_drag = 0.2
minimum_drag = 0.2
angularDrag = 2
crashTolerance = 12
breakingForce = 400
breakingTorque = 600
maxTemp = 3600

  EFFECTS
    {
  running_closed
  {
    AUDIO
    {
      channel = Ship
      clip = sound_rocket_spurts
      volume = 0.0 0.0
      volume = 0.1 2.5
      volume = 1.0 3.5
      pitch = 0.0 0.2
      pitch = 1.0 1.0
      loop = true
    }
            AUDIO
            {
		name = jetscreamHighSpeed2
                channel = Ship
                clip = sound_jet_low
                volume = 0.0 0.0
                volume = 0.1 1.5
                volume = 1.0 2
                pitch = 0.3 0.7
		pitch = 1 0.8
                loop = true
                speed = 0.0 1
                speed = 1.0 2
            }

    MODEL_MULTI_PARTICLE
    {
      name = asdf3
      modelName = Squad/FX/shockExhaust_blue_small
      transformName = FXNode
      emission = 0.0 0.0
      emission = 0.05 0.0
      emission = 0.075 4
      emission = 1.0 5
      speed = 0.0 0.5
      speed = 1.0 1.2
    }
    MODEL_MULTI_PARTICLE
    {
      name = asdf4
      modelName = Squad/FX/shockExhaust_blue_small
      transformName = FXNode1
      emission = 0.0 0.0
      emission = 0.05 0.0
      emission = 0.075 4
      emission = 1.0 5
      speed = 0.0 0.5
      speed = 1.0 1.2
    }
            MODEL_MULTI_PARTICLE
            {
                name = flamethrust
                modelName = OPT/FX/RedGreenFlame
                transformName = FXNode
                emission = 0.0 0 0
                emission = 0.1 0.5
                emission = 0.75 1
                emission = 1.0 1.5
                speed = 0.0 0.7
                speed = 1 1.2
            }
            MODEL_MULTI_PARTICLE
            {
                name = flamethrust1
                modelName = OPT/FX/RedGreenFlame
                transformName = FXNode1
                emission = 0.0 0 0
                emission = 0.1 0.5
                emission = 0.75 1
                emission = 1.0 1.5
                speed = 0.0 0.7
                speed = 1 1.2
            }
  }
        throttleControlledFlame
        {

            AUDIO
            {
		name = jetscream
                channel = Ship
                clip = sound_jet_low
                volume = 0.0 0.0
		volume = 0.1 0.4
		volume = 0.6 0.8
                volume = 1.0 0.3
		volume = 1.5 0.2
                pitch = 0.0 0.1
		pitch = 0.5 0.2
                pitch = 1.0 2
                loop = true
                speed = 0.0 1.70
                speed = 1.0 1.65
            }
	}
        powersmoke
        {
            PREFAB_PARTICLE
            {
                name = flamethrust3
                prefabName = fx_smokeTrail_light
                transformName = SmokeTransform
                emission = 0.0 0.0
                emission = 0.05 0.0
                emission = 0.075 0.25
                emission = 1.0 1.25
		emission = 1.7 2
                speed = 0.0 0.25
                speed = 1.0 1.0
            }
            PREFAB_PARTICLE
            {
                name = flamethrust4
                prefabName = fx_smokeTrail_light
                transformName = SmokeTransform1
                emission = 0.0 0.0
                emission = 0.05 0.0
                emission = 0.075 0.25
                emission = 1.0 1.25
		emission = 1.7 2
                speed = 0.0 0.25
                speed = 1.0 1.0
            }
            AUDIO
            {
		name = jethumm //Ram effect
                channel = Ship
                clip = sound_jet_deep
                volume = 0.0 0.0
		volume = 0.1 1
                volume = 1.0 1.5
		volume = 1.7 2.5
                pitch = 0.0 0.8
		pitch = 0.5 1
                pitch = 1.0 3
		pitch = 1.7 5
                loop = true
                speed = 0.0 1.70
                speed = 1.0 1.95
            }
            AUDIO
            {
		name = jetscreamHighSpeed
                channel = Ship
                clip = sound_jet_low
                volume = 0.9 0.0
                volume = 1.0 0.1
		volume = 1.7 2
                pitch = 0.9 1.5
		pitch = 1.7 3
                loop = true
                speed = 0.0 1
                speed = 1.0 1
            }
            AUDIO
            {
		name = rocketsound
                channel = Ship
                clip = sound_rocket_mini
                volume = 0.0 0.0
                volume = 1.0 0.8
		volume = 1.7 0.2
                pitch = 0.0 0.2
                pitch = 1.0 0.3
		pitch = 1.7 0.4
                loop = true
            }
        }
        engage
        {
            AUDIO
            {
		name = engageengine
                channel = Ship
                clip = sound_vent_soft
                volume = 0.2
                pitch = 0.4
                loop = false
            }
        }
        disengage
        {
            AUDIO
            {
                channel = Ship
                clip = sound_vent_soft
                volume = 0.1
                pitch = 0.6
                loop = false
		speed = 1 0.2
            }
        }
        flameout
        {
            AUDIO
            {
                channel = Ship
                clip = sound_explosion_low
                volume = 0.3
                pitch = 2.0
                loop = false
            }
        }
    }

MODULE
{
        name = MultiModeEngine
        primaryEngineID = TurboJet
        secondaryEngineID = RamJet
}

MODULE
{
	name = ModuleEnginesFX
	engineID = TurboJet
	thrustVectorTransformName = thrustTransform
	runningEffectName = powersmoke
	FlameoutEffectName = flameout
	engageEffectName = engage
	exhaustDamage = True
	ignitionThreshold = 0.15
	minThrust = 0
	maxThrust = 800
	heatProduction = 400
	useEngineResponseTime = True
	engineAccelerationSpeed = 0.55
	engineDecelerationSpeed = 0.3
	useVelocityCurve = True
	PROPELLANT
	{
		name = LiquidFuel
		ratio = 1
		DrawGauge = True
	}
	PROPELLANT
	{
		name = IntakeAir
		ratio = 15
	}
	atmosphereCurve
 	{
		key = 0 1200
		key = 0.3 1800
		key = 1 800
 	}
	velocityCurve
	{
		key = 0 0.8 0 0
		key = 700 1 0 0
		key = 1500 0 0 0
	}
	
}

MODULE
{
	name = ModuleEnginesFX
	engineID = RamJet
	thrustVectorTransformName = thrustTransform
	runningEffectName =  running_closed
	FlameoutEffectName = flameout
	directThrottleEffectName = throttleControlledFlame
	engageEffectName = engage
	exhaustDamage = True
	ignitionThreshold = 0.15
	minThrust = 0
	maxThrust = 700
	heatProduction = 750
	useEngineResponseTime = True
	engineAccelerationSpeed = 0.55
	engineDecelerationSpeed = 0.3
	useVelocityCurve = True
	PROPELLANT
	{
		name = LiquidFuel
		ratio = 3
		DrawGauge = True
	}
	PROPELLANT
	{
		name = SuperCompressedAir
		ratio = 15
	}
	atmosphereCurve
 	{
		key = 0 700
		key = 0.3 900
		key = 1 800
 	}
	velocityCurve
	{
		key = 0 0 0 0
		key = 600 0.5 0 0
		key = 1000 1 0 0
		key = 2570 0 0 0
	}
	
}

MODULE
{
    name = ModuleAnimateHeat
    ThermalAnim = engine_light
}

MODULE
{
	name = ModuleAlternator	
	RESOURCE
	{
		name = ElectricCharge
		rate = 5.0
	}
}
MODULE
{
	name = ModuleLiftingSurface
	
	deflectionLiftCoeff = 0.6
	dragAtMaxAoA = 0.3
	dragAtMinAoA = 0.1
}
RESOURCE
{
	name = ElectricCharge
	amount = 0
	maxAmount = 0
  	isTweakable = false
	hideFlow = true
}
MODULE
{
  name = ModuleResourceIntake
  resourceName = IntakeAir
  checkForOxygen = true
  area = 0.0125
  intakeSpeed = 10
  intakeTransformName = intake_transform
}

RESOURCE
{
 name = IntakeAir
 amount = 0.5
 maxAmount = 1.0
}
MODULE
{
	name = ModuleTestSubject
	
	// nowhere: 0, srf: 1, ocean: 2, atmo: 4, space: 8
	environments = 7
	
	useStaging = True
	useEvent = True
}
}
